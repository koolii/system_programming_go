# 7章　UDPソケットを使ったマルチキャスト通信

## UDP
* コネクションがない(3wayハンドシェイクがない)
* データロスの検知をしない
* 通信速度の制限をしない
* パケットの到着順序を管理しない
* 一方的にデータを複数のコンピュータに送信することが出来る
* 主にUDPを使っているDNSも、512バイトを超えるレスポンスの場合はTCPにフォールバックする仕組みがある(多くがTCPを土台にしている)
* 再送処理や通信経路が混雑していた処理などの実装などはUDPの場合は自分で実装しなくてはならない

## UDPのマルチキャストの実装例(UDPならではの機能)
マルチキャストは、リクエスト側の負担を増やすことなく多くのクライアントに同時にデータを送信できる仕組み
マルチキャストで使える宛先IPアドレスが予め決められていて、ある送信元から同じマルチキャストアドレスに属するコンピュータに対して
データを送信できる

ある送信元とマルチキャストアドレスの組み合わせをグループといい、同じグループなら受信するコンピュータが何台でも負担は1台分で済む
IPv4だと、先頭の4ビットがマルチキャスト用として予約されている

### TCP/UDPの違い
TCPは **ウィンドウ制御・フロー制御** があるが、UDPには無い（自分で実装は可能）
その代わりUDPはTCPよりも高速

ひとかたまりで送信できるデータの大きさは、通信経路の種類やルーターなどの設定によって変わり
ある経路で一塊で送信できるデータの上限のことをその経路の最大転送単位(MTU)という

一般的に使われるイーサネットのMTUは1500オクテット(1500バイト)だが、実際のルーターで「ジャンボフレーム対応」というものだと
それよりも大きいフレームとなる、この場合はIPレベルで複数のパケットに分割する(IPフラグメンテーション)

UDPの場合はパケットを分割してしまうと、全てが到着して結合し終わった後に、処理をするというUDPのメリットを殺してしまうから
できるだけパケットの大きさには注意して送信しなければならない

ネットワークの渋滞を避けるように流量を調整し、ネットワーウの最大効率で通信できるようにするとともに、複数の通信をお互いにフェアに行えるようにする仕組み
TCPにはその機能があり、沢山のアルゴリズムで実装されている

ここで大事なのは、自分の通信だけを最大化することではなく、他の通信回線にもきちんと帯域を譲り、全員が問題なく通信を継続しつつ必要な最大速度が得られること
  => フェアネスといい、TCPの大事な価値

もちろんUDPにはこの機能はない